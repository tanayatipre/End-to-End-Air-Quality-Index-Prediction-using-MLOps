[2025-07-25 16:16:57,704: INFO: main: >>>>>> stage Data Ingestion Stage started <<<<<<]
[2025-07-25 16:16:57,717: INFO: common: yaml file: config\config.yaml loaded successfully]
[2025-07-25 16:16:57,725: INFO: common: yaml file: params.yaml loaded successfully]
[2025-07-25 16:16:57,734: INFO: common: yaml file: schema.yaml loaded successfully]
[2025-07-25 16:16:57,734: INFO: configuration: Debug: Schema loaded into Configuration Manager:{'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-25 16:16:57,734: INFO: common: created directory at artifacts]
[2025-07-25 16:16:57,737: INFO: common: created directory at artifacts/data_ingestion]
[2025-07-25 16:16:59,715: INFO: data_ingestion: artifacts/data_ingestion/data.zip downloaded! with following info: 
Connection: close
Content-Length: 752473
Cache-Control: max-age=300
Content-Security-Policy: default-src 'none'; style-src 'unsafe-inline'; sandbox
Content-Type: application/zip
ETag: "65fb8631317f9b204b40b708621b0d20cf4c66c698cb4521e6f795e6600ac414"
Strict-Transport-Security: max-age=31536000
X-Content-Type-Options: nosniff
X-Frame-Options: deny
X-XSS-Protection: 1; mode=block
X-GitHub-Request-Id: E8EA:275008:B9F86:1AA500:68835B6B
Accept-Ranges: bytes
Date: Fri, 25 Jul 2025 10:46:58 GMT
Via: 1.1 varnish
X-Served-By: cache-hyd1100021-HYD
X-Cache: HIT
X-Cache-Hits: 0
X-Timer: S1753440418.457597,VS0,VE241
Vary: Authorization,Accept-Encoding
Access-Control-Allow-Origin: *
Cross-Origin-Resource-Policy: cross-origin
X-Fastly-Request-ID: 30e5fbd0fc62fde7d69695f0b3738aa224feff28
Expires: Fri, 25 Jul 2025 10:51:58 GMT
Source-Age: 0

]
[2025-07-25 16:16:59,791: INFO: main: >>>>>> stage Data Ingestion Stage completed <<<<<<

x==========x]
[2025-07-25 16:16:59,791: INFO: main: >>>>>> stage Data Validation Stage started <<<<<<]
[2025-07-25 16:16:59,798: INFO: common: yaml file: config\config.yaml loaded successfully]
[2025-07-25 16:16:59,811: INFO: common: yaml file: params.yaml loaded successfully]
[2025-07-25 16:16:59,819: INFO: common: yaml file: schema.yaml loaded successfully]
[2025-07-25 16:16:59,819: INFO: configuration: Debug: Schema loaded into Configuration Manager:{'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-25 16:16:59,825: INFO: common: created directory at artifacts]
[2025-07-25 16:16:59,825: INFO: common: created directory at artifacts/data_validation]
[2025-07-25 16:16:59,945: INFO: data_validation: Data loaded from artifacts/data_ingestion/city_day.csv. Data columns: ['City', 'Date', 'PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Xylene', 'AQI', 'AQI_Bucket']]
[2025-07-25 16:16:59,945: INFO: data_validation: Set of columns from loaded data: {'Date', 'NOx', 'NO', 'AQI_Bucket', 'CO', 'O3', 'Toluene', 'PM10', 'Xylene', 'PM2.5', 'City', 'NO2', 'NH3', 'Benzene', 'SO2', 'AQI'}]
[2025-07-25 16:16:59,945: INFO: data_validation: Raw self.config.all_schema type: <class 'box.config_box.ConfigBox'>]
[2025-07-25 16:16:59,945: INFO: data_validation: Raw self.config.all_schema content: {'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-25 16:16:59,945: INFO: data_validation: Set of columns from schema: {'Date', 'NOx', 'NO', 'AQI_Bucket', 'CO', 'O3', 'Toluene', 'PM10', 'Xylene', 'PM2.5', 'City', 'NO2', 'NH3', 'Benzene', 'SO2', 'AQI'}]
[2025-07-25 16:16:59,945: INFO: data_validation: Data validation completed: Schema validation successful.]
[2025-07-25 16:16:59,953: INFO: main: >>>>>> stage Data Validation Stage completed <<<<<<

x==========x]
[2025-07-25 16:16:59,953: INFO: main: >>>>>> stage Data Transformation Stage started <<<<<<]
[2025-07-25 16:16:59,961: INFO: common: yaml file: config\config.yaml loaded successfully]
[2025-07-25 16:16:59,974: INFO: common: yaml file: params.yaml loaded successfully]
[2025-07-25 16:16:59,977: INFO: common: yaml file: schema.yaml loaded successfully]
[2025-07-25 16:16:59,977: INFO: configuration: Debug: Schema loaded into Configuration Manager:{'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-25 16:16:59,981: INFO: common: created directory at artifacts]
[2025-07-25 16:16:59,981: INFO: common: created directory at artifacts/data_transformation]
[2025-07-25 16:17:00,054: INFO: data_transformation: Original data loaded. Shape: (29531, 16)]
[2025-07-25 16:17:00,072: INFO: data_transformation: Dropped 4681 rows with NaN in AQI or AQI_Bucket. New shape: (24850, 16)]
[2025-07-25 16:17:00,107: INFO: data_transformation: Date features engineered.]
[2025-07-25 16:17:00,116: INFO: data_transformation: Columns explicitly dropped from features (X) before CT: ['Xylene', 'Date']. New X shape: (24850, 17)]
[2025-07-25 16:17:00,128: INFO: data_transformation: Data split into train ((19880, 17)) and test ((4970, 17)) sets.]
[2025-07-25 16:17:00,128: INFO: data_transformation: CT Config - numerical_cols (from params): ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend']]
[2025-07-25 16:17:00,128: INFO: data_transformation: CT Config - columns_to_log_transform (from params): ['PM2.5', 'PM10', 'CO', 'NH3', 'NO', 'NO2', 'NOx', 'SO2', 'O3', 'Benzene', 'Toluene', 'AQI']]
[2025-07-25 16:17:00,131: INFO: data_transformation: CT Config - num_cols_to_log (derived for CT): ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene']]
[2025-07-25 16:17:00,131: INFO: data_transformation: CT Config - num_cols_no_log (derived for CT): ['Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend']]
[2025-07-25 16:17:00,131: INFO: data_transformation: CT Config - categorical_cols (from params): ['City']]
[2025-07-25 16:17:00,131: INFO: data_transformation: X_train columns before ColumnTransformer fit_transform: ['City', 'PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend']]
[2025-07-25 16:17:00,224: INFO: data_transformation: ColumnTransformer fitted on X_train and transformed X_train, X_test.]
[2025-07-25 16:17:00,224: WARNING: data_transformation: get_feature_names_out() not available. Transformed DataFrame column names might be generic.]
[2025-07-25 16:17:01,246: INFO: data_transformation: Transformed train data saved to artifacts/data_transformation/train.csv. Shape: (19880, 43)]
[2025-07-25 16:17:01,246: INFO: data_transformation: Transformed test data saved to artifacts/data_transformation/test.csv. Shape: (4970, 43)]
[2025-07-25 16:17:01,268: INFO: data_transformation: Preprocessor object saved to artifacts/data_transformation/preprocessor.joblib]
[2025-07-25 16:17:01,276: INFO: main: >>>>>> stage Data Transformation Stage completed <<<<<<

x==========x]
[2025-07-25 16:17:01,276: INFO: main: >>>>>> stage Model Trainer Stage started <<<<<<]
[2025-07-25 16:17:01,279: INFO: common: yaml file: config\config.yaml loaded successfully]
[2025-07-25 16:17:01,287: INFO: common: yaml file: params.yaml loaded successfully]
[2025-07-25 16:17:01,289: INFO: common: yaml file: schema.yaml loaded successfully]
[2025-07-25 16:17:01,291: INFO: configuration: Debug: Schema loaded into Configuration Manager:{'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-25 16:17:01,294: INFO: common: created directory at artifacts]
[2025-07-25 16:17:01,295: INFO: common: created directory at artifacts/model_trainer]
[2025-07-25 16:17:01,526: INFO: model_trainer: Training CatBoostRegressor with parameters: {'iterations': 1000, 'learning_rate': 0.05, 'depth': 8, 'loss_function': 'RMSE', 'random_state': 42, 'verbose': 0}]
[2025-07-25 16:17:13,309: INFO: model_trainer: CatBoostRegressor model training completed.]
[2025-07-25 16:17:13,321: INFO: model_trainer: Trained CatBoostRegressor model saved to artifacts/model_trainer\model.joblib]
[2025-07-25 16:17:13,325: INFO: main: >>>>>> stage Model Trainer Stage completed <<<<<<

x==========x]
[2025-07-25 16:17:13,326: INFO: main: >>>>>> stage Model Evaluation Stage started <<<<<<]
[2025-07-25 16:17:13,333: INFO: common: yaml file: config\config.yaml loaded successfully]
[2025-07-25 16:17:13,337: INFO: common: yaml file: params.yaml loaded successfully]
[2025-07-25 16:17:13,343: INFO: common: yaml file: schema.yaml loaded successfully]
[2025-07-25 16:17:13,343: INFO: configuration: Debug: Schema loaded into Configuration Manager:{'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-25 16:17:13,345: INFO: common: created directory at artifacts]
[2025-07-25 16:17:13,345: INFO: common: created directory at artifacts/model_evaluation]
[2025-07-25 16:17:13,800: INFO: common: json file saved at: artifacts\model_evaluation\metrics.json]
[2025-07-25 16:17:13,800: INFO: model_evaluation: Metrics saved locally to artifacts/model_evaluation/metrics.json]
[2025-07-25 16:17:13,806: INFO: model_evaluation: Model parameters logged to MLflow.]
[2025-07-25 16:17:13,819: INFO: model_evaluation: Metrics logged to MLflow.]
[2025-07-25 16:17:20,430: INFO: model_evaluation: Model logged to MLflow.]
[2025-07-25 16:17:20,432: INFO: main: >>>>>> stage Model Evaluation Stage completed <<<<<<

x==========x]
[2025-07-25 16:17:45,131: INFO: _internal: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8080
 * Running on http://192.168.1.6:8080]
[2025-07-25 16:17:45,131: INFO: _internal: [33mPress CTRL+C to quit[0m]
[2025-07-25 16:17:55,976: INFO: app: Home page requested.]
[2025-07-25 16:17:55,985: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 16:17:55] "GET / HTTP/1.1" 200 -]
[2025-07-25 16:17:56,034: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 16:17:56] "[33mGET /static/css2/nunito-font.css HTTP/1.1[0m" 404 -]
[2025-07-25 16:17:56,048: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 16:17:56] "[33mGET /static/css2/style.css HTTP/1.1[0m" 404 -]
[2025-07-25 16:17:56,049: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 16:17:56] "[33mGET /static/css/styles.css HTTP/1.1[0m" 404 -]
[2025-07-25 16:17:56,052: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 16:17:56] "[33mGET /static/js/scripts.js HTTP/1.1[0m" 404 -]
[2025-07-25 16:17:56,115: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 16:17:56] "[33mGET /static/assets/img/air-pollution.jpg HTTP/1.1[0m" 404 -]
[2025-07-25 16:17:56,180: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 16:17:56] "[36mGET /static/assets/img/form-v9.jpg HTTP/1.1[0m" 304 -]
[2025-07-25 16:19:29,014: INFO: app: Received prediction request with data: [{'City': 'Amritsar', 'Date': '2019-07-11', 'PM2.5': 54.3, 'PM10': 120.5, 'NO': 10.2, 'NO2': 30.5, 'NOx': 40.7, 'NH3': 12.4, 'CO': 1.2, 'SO2': 22.1, 'O3': 19.6, 'Benzene': 0.56, 'Toluene': 3.4, 'Xylene': 0.12}]]
[2025-07-25 16:19:29,019: INFO: common: yaml file: config\config.yaml loaded successfully]
[2025-07-25 16:19:29,024: INFO: common: yaml file: params.yaml loaded successfully]
[2025-07-25 16:19:29,027: INFO: common: yaml file: schema.yaml loaded successfully]
[2025-07-25 16:19:29,027: INFO: configuration: Debug: Schema loaded into Configuration Manager:{'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-25 16:19:29,030: INFO: common: created directory at artifacts]
[2025-07-25 16:19:29,030: INFO: common: created directory at artifacts/data_transformation]
[2025-07-25 16:19:31,374: INFO: prediction: PredictionPipeline initialized: preprocessor and model loaded.]
[2025-07-25 16:19:31,374: DEBUG: prediction: PredictionPipeline: CT expects numerical columns to log: ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene']]
[2025-07-25 16:19:31,374: DEBUG: prediction: PredictionPipeline: CT expects numerical columns NOT to log: ['Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend']]
[2025-07-25 16:19:31,374: DEBUG: prediction: PredictionPipeline: CT expects categorical columns: ['City']]
[2025-07-25 16:19:31,374: DEBUG: prediction: PredictionPipeline: All expected CT columns in order: ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend', 'City']]
[2025-07-25 16:19:31,374: INFO: prediction: Received raw input data for prediction. Shape: (1, 14)]
[2025-07-25 16:19:31,374: DEBUG: prediction: PredictionPipeline: raw_input_data dtypes (from Flask form):
City        object
Date        object
PM2.5      float64
PM10       float64
NO         float64
NO2        float64
NOx        float64
NH3        float64
CO         float64
SO2        float64
O3         float64
Benzene    float64
Toluene    float64
Xylene     float64
dtype: object]
[2025-07-25 16:19:31,407: DEBUG: prediction: PredictionPipeline: raw_input_data head (from Flask form):
       City        Date  PM2.5  ...  Benzene  Toluene  Xylene
0  Amritsar  2019-07-11   54.3  ...     0.56      3.4    0.12

[1 rows x 14 columns]]
[2025-07-25 16:19:31,414: DEBUG: prediction: Date features engineered for prediction input.]
[2025-07-25 16:19:31,414: DEBUG: prediction: Dropped column 'Xylene' from prediction input.]
[2025-07-25 16:19:31,418: DEBUG: prediction: Dropped column 'Date' from prediction input.]
[2025-07-25 16:19:31,418: DEBUG: prediction: PredictionPipeline: data_to_transform columns BEFORE reindex: ['City', 'PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend']]
[2025-07-25 16:19:31,419: DEBUG: prediction: PredictionPipeline: data_to_transform dtypes BEFORE reindex:
City          object
PM2.5        float64
PM10         float64
NO           float64
NO2          float64
NOx          float64
NH3          float64
CO           float64
SO2          float64
O3           float64
Benzene      float64
Toluene      float64
Year           int32
Month          int32
Day            int32
DayOfWeek      int32
IsWeekend      int32
dtype: object]
[2025-07-25 16:19:31,420: DEBUG: prediction: PredictionPipeline: data_for_ct columns AFTER reindex: ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend', 'City']]
[2025-07-25 16:19:31,420: DEBUG: prediction: PredictionPipeline: data_for_ct dtypes AFTER reindex:
PM2.5        float64
PM10         float64
NO           float64
NO2          float64
NOx          float64
NH3          float64
CO           float64
SO2          float64
O3           float64
Benzene      float64
Toluene      float64
Year           int32
Month          int32
Day            int32
DayOfWeek      int32
IsWeekend      int32
City          object
dtype: object]
[2025-07-25 16:19:31,439: DEBUG: prediction: PredictionPipeline: data_for_ct head AFTER reindex:
   PM2.5   PM10    NO  ...  DayOfWeek  IsWeekend      City
0   54.3  120.5  10.2  ...          3          0  Amritsar

[1 rows x 17 columns]]
[2025-07-25 16:19:31,446: INFO: prediction: Prediction input data transformed using loaded preprocessor.]
[2025-07-25 16:19:31,450: INFO: prediction: Prediction made successfully.]
[2025-07-25 16:19:31,450: INFO: prediction: Inverse log1p transformation applied to prediction.]
[2025-07-25 16:19:31,450: INFO: app: Prediction successful. Predicted AQI: 53405035921770035388861597679058241220906775255973888.00]
[2025-07-25 16:19:31,457: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 16:19:31] "POST /predict HTTP/1.1" 200 -]
[2025-07-25 16:19:31,518: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 16:19:31] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -]
[2025-07-25 21:14:27,063: INFO: main: >>>>>> stage Data Ingestion Stage started <<<<<<]
[2025-07-25 21:14:27,080: INFO: common: yaml file: config\config.yaml loaded successfully]
[2025-07-25 21:14:27,097: INFO: common: yaml file: params.yaml loaded successfully]
[2025-07-25 21:14:27,113: INFO: common: yaml file: schema.yaml loaded successfully]
[2025-07-25 21:14:27,115: INFO: configuration: Debug: Schema loaded into Configuration Manager:{'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-25 21:14:27,115: INFO: common: created directory at artifacts]
[2025-07-25 21:14:27,116: INFO: common: created directory at artifacts/data_ingestion]
[2025-07-25 21:14:28,256: INFO: data_ingestion: artifacts/data_ingestion/data.zip downloaded! with following info: 
Connection: close
Content-Length: 752473
Cache-Control: max-age=300
Content-Security-Policy: default-src 'none'; style-src 'unsafe-inline'; sandbox
Content-Type: application/zip
ETag: "65fb8631317f9b204b40b708621b0d20cf4c66c698cb4521e6f795e6600ac414"
Strict-Transport-Security: max-age=31536000
X-Content-Type-Options: nosniff
X-Frame-Options: deny
X-XSS-Protection: 1; mode=block
X-GitHub-Request-Id: E24A:37B2AC:1D9B7:3D38C:6883A65A
Accept-Ranges: bytes
Date: Fri, 25 Jul 2025 15:44:27 GMT
Via: 1.1 varnish
X-Served-By: cache-hyd1100022-HYD
X-Cache: MISS
X-Cache-Hits: 0
X-Timer: S1753458267.696072,VS0,VE316
Vary: Authorization,Accept-Encoding
Access-Control-Allow-Origin: *
Cross-Origin-Resource-Policy: cross-origin
X-Fastly-Request-ID: 11b49aa2b16f9b247aea68f2b75ea7d81ef0e808
Expires: Fri, 25 Jul 2025 15:49:27 GMT
Source-Age: 0

]
[2025-07-25 21:14:28,289: INFO: main: >>>>>> stage Data Ingestion Stage completed <<<<<<

x==========x]
[2025-07-25 21:14:28,289: INFO: main: >>>>>> stage Data Validation Stage started <<<<<<]
[2025-07-25 21:14:28,293: INFO: common: yaml file: config\config.yaml loaded successfully]
[2025-07-25 21:14:28,296: INFO: common: yaml file: params.yaml loaded successfully]
[2025-07-25 21:14:28,299: INFO: common: yaml file: schema.yaml loaded successfully]
[2025-07-25 21:14:28,299: INFO: configuration: Debug: Schema loaded into Configuration Manager:{'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-25 21:14:28,300: INFO: common: created directory at artifacts]
[2025-07-25 21:14:28,300: INFO: common: created directory at artifacts/data_validation]
[2025-07-25 21:14:28,358: INFO: data_validation: Data loaded from artifacts/data_ingestion/city_day.csv. Data columns: ['City', 'Date', 'PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Xylene', 'AQI', 'AQI_Bucket']]
[2025-07-25 21:14:28,358: INFO: data_validation: Set of columns from loaded data: {'NOx', 'NH3', 'City', 'Toluene', 'PM10', 'NO', 'Xylene', 'Benzene', 'NO2', 'PM2.5', 'Date', 'CO', 'SO2', 'O3', 'AQI', 'AQI_Bucket'}]
[2025-07-25 21:14:28,358: INFO: data_validation: Raw self.config.all_schema type: <class 'box.config_box.ConfigBox'>]
[2025-07-25 21:14:28,358: INFO: data_validation: Raw self.config.all_schema content: {'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-25 21:14:28,358: INFO: data_validation: Set of columns from schema: {'NOx', 'NH3', 'City', 'Toluene', 'PM10', 'NO', 'Xylene', 'Benzene', 'NO2', 'PM2.5', 'Date', 'CO', 'SO2', 'O3', 'AQI', 'AQI_Bucket'}]
[2025-07-25 21:14:28,358: INFO: data_validation: Data validation completed: Schema validation successful.]
[2025-07-25 21:14:28,358: INFO: main: >>>>>> stage Data Validation Stage completed <<<<<<

x==========x]
[2025-07-25 21:14:28,358: INFO: main: >>>>>> stage Data Transformation Stage started <<<<<<]
[2025-07-25 21:14:28,375: INFO: common: yaml file: config\config.yaml loaded successfully]
[2025-07-25 21:14:28,378: INFO: common: yaml file: params.yaml loaded successfully]
[2025-07-25 21:14:28,380: INFO: common: yaml file: schema.yaml loaded successfully]
[2025-07-25 21:14:28,381: INFO: configuration: Debug: Schema loaded into Configuration Manager:{'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-25 21:14:28,381: INFO: common: created directory at artifacts]
[2025-07-25 21:14:28,382: INFO: common: created directory at artifacts/data_transformation]
[2025-07-25 21:14:28,427: INFO: data_transformation: Original data loaded. Shape: (29531, 16)]
[2025-07-25 21:14:28,447: INFO: data_transformation: Dropped 4681 rows with NaN in AQI or AQI_Bucket. New shape: (24850, 16)]
[2025-07-25 21:14:28,465: INFO: data_transformation: Date features engineered.]
[2025-07-25 21:14:28,477: INFO: data_transformation: Columns explicitly dropped from features (X) before CT: ['Xylene', 'Date']. New X shape: (24850, 17)]
[2025-07-25 21:14:28,485: INFO: data_transformation: Data split into train ((19880, 17)) and test ((4970, 17)) sets.]
[2025-07-25 21:14:28,486: INFO: data_transformation: CT Config - numerical_cols (from params): ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend']]
[2025-07-25 21:14:28,486: INFO: data_transformation: CT Config - columns_to_log_transform (from params): ['PM2.5', 'PM10', 'CO', 'NH3', 'NO', 'NO2', 'NOx', 'SO2', 'O3', 'Benzene', 'Toluene', 'AQI']]
[2025-07-25 21:14:28,486: INFO: data_transformation: CT Config - num_cols_to_log (derived for CT): ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene']]
[2025-07-25 21:14:28,486: INFO: data_transformation: CT Config - num_cols_no_log (derived for CT): ['Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend']]
[2025-07-25 21:14:28,486: INFO: data_transformation: CT Config - categorical_cols (from params): ['City']]
[2025-07-25 21:14:28,486: INFO: data_transformation: X_train columns before ColumnTransformer fit_transform: ['City', 'PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend']]
[2025-07-25 21:14:28,566: INFO: data_transformation: ColumnTransformer fitted on X_train and transformed X_train, X_test.]
[2025-07-25 21:14:28,567: WARNING: data_transformation: get_feature_names_out() not available. Transformed DataFrame column names might be generic.]
[2025-07-25 21:14:29,260: INFO: data_transformation: Transformed train data saved to artifacts/data_transformation/train.csv. Shape: (19880, 43)]
[2025-07-25 21:14:29,260: INFO: data_transformation: Transformed test data saved to artifacts/data_transformation/test.csv. Shape: (4970, 43)]
[2025-07-25 21:14:29,265: INFO: data_transformation: Preprocessor object saved to artifacts/data_transformation/preprocessor.joblib]
[2025-07-25 21:14:29,272: INFO: main: >>>>>> stage Data Transformation Stage completed <<<<<<

x==========x]
[2025-07-25 21:14:29,272: INFO: main: >>>>>> stage Model Trainer Stage started <<<<<<]
[2025-07-25 21:14:29,277: INFO: common: yaml file: config\config.yaml loaded successfully]
[2025-07-25 21:14:29,280: INFO: common: yaml file: params.yaml loaded successfully]
[2025-07-25 21:14:29,282: INFO: common: yaml file: schema.yaml loaded successfully]
[2025-07-25 21:14:29,282: INFO: configuration: Debug: Schema loaded into Configuration Manager:{'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-25 21:14:29,283: INFO: common: created directory at artifacts]
[2025-07-25 21:14:29,284: INFO: common: created directory at artifacts/model_trainer]
[2025-07-25 21:14:29,438: INFO: model_trainer: Training CatBoostRegressor with parameters: {'iterations': 1000, 'learning_rate': 0.05, 'depth': 8, 'loss_function': 'RMSE', 'random_state': 42, 'verbose': 0}]
[2025-07-25 21:14:39,578: INFO: model_trainer: CatBoostRegressor model training completed.]
[2025-07-25 21:14:39,591: INFO: model_trainer: Trained CatBoostRegressor model saved to artifacts/model_trainer\model.joblib]
[2025-07-25 21:14:39,597: INFO: main: >>>>>> stage Model Trainer Stage completed <<<<<<

x==========x]
[2025-07-25 21:14:39,598: INFO: main: >>>>>> stage Model Evaluation Stage started <<<<<<]
[2025-07-25 21:14:39,602: INFO: common: yaml file: config\config.yaml loaded successfully]
[2025-07-25 21:14:39,605: INFO: common: yaml file: params.yaml loaded successfully]
[2025-07-25 21:14:39,608: INFO: common: yaml file: schema.yaml loaded successfully]
[2025-07-25 21:14:39,608: INFO: configuration: Debug: Schema loaded into Configuration Manager:{'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-25 21:14:39,608: INFO: common: created directory at artifacts]
[2025-07-25 21:14:39,611: INFO: common: created directory at artifacts/model_evaluation]
[2025-07-25 21:14:39,928: INFO: common: json file saved at: artifacts\model_evaluation\metrics.json]
[2025-07-25 21:14:39,928: INFO: model_evaluation: Metrics saved locally to artifacts/model_evaluation/metrics.json]
[2025-07-25 21:14:39,928: INFO: model_evaluation: Model parameters logged to MLflow.]
[2025-07-25 21:14:39,946: INFO: model_evaluation: Metrics logged to MLflow.]
[2025-07-25 21:14:46,345: INFO: model_evaluation: Model logged to MLflow.]
[2025-07-25 21:14:46,346: INFO: main: >>>>>> stage Model Evaluation Stage completed <<<<<<

x==========x]
[2025-07-25 21:15:10,537: INFO: _internal: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8080
 * Running on http://192.168.1.5:8080]
[2025-07-25 21:15:10,545: INFO: _internal: [33mPress CTRL+C to quit[0m]
[2025-07-25 21:16:44,406: INFO: app: Home page requested.]
[2025-07-25 21:16:44,492: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 21:16:44] "GET / HTTP/1.1" 200 -]
[2025-07-25 21:16:44,560: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 21:16:44] "[33mGET /static/css/styles.css HTTP/1.1[0m" 404 -]
[2025-07-25 21:16:44,584: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 21:16:44] "[33mGET /static/css2/style.css HTTP/1.1[0m" 404 -]
[2025-07-25 21:16:44,585: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 21:16:44] "[33mGET /static/css2/nunito-font.css HTTP/1.1[0m" 404 -]
[2025-07-25 21:16:44,600: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 21:16:44] "[33mGET /static/js/scripts.js HTTP/1.1[0m" 404 -]
[2025-07-25 21:16:44,650: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 21:16:44] "[33mGET /static/assets/img/air-pollution.jpg HTTP/1.1[0m" 404 -]
[2025-07-25 21:16:44,721: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 21:16:44] "[36mGET /static/assets/img/form-v9.jpg HTTP/1.1[0m" 304 -]
[2025-07-25 21:16:45,282: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 21:16:45] "[33mGET /static/assets/favicon.ico HTTP/1.1[0m" 404 -]
[2025-07-25 22:38:55,287: INFO: app: Received prediction request with data: [{'City': 'Ahmedabad', 'Date': '2019-06-06', 'PM2.5': 54.3, 'PM10': 120.5, 'NO': 10.2, 'NO2': 30.5, 'NOx': 40.7, 'NH3': 12.4, 'CO': 1.2, 'SO2': 22.1, 'O3': 19.6, 'Benzene': 0.56, 'Toluene': 3.4, 'Xylene': 0.12}]]
[2025-07-25 22:38:55,312: INFO: common: yaml file: config\config.yaml loaded successfully]
[2025-07-25 22:38:55,341: INFO: common: yaml file: params.yaml loaded successfully]
[2025-07-25 22:38:55,343: INFO: common: yaml file: schema.yaml loaded successfully]
[2025-07-25 22:38:55,353: INFO: configuration: Debug: Schema loaded into Configuration Manager:{'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-25 22:38:55,361: INFO: common: created directory at artifacts]
[2025-07-25 22:38:55,363: INFO: common: created directory at artifacts/data_transformation]
[2025-07-25 22:38:59,850: INFO: prediction: PredictionPipeline initialized: preprocessor and model loaded.]
[2025-07-25 22:38:59,852: DEBUG: prediction: PredictionPipeline: CT expects numerical columns to log: ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene']]
[2025-07-25 22:38:59,852: DEBUG: prediction: PredictionPipeline: CT expects numerical columns NOT to log: ['Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend']]
[2025-07-25 22:38:59,852: DEBUG: prediction: PredictionPipeline: CT expects categorical columns: ['City']]
[2025-07-25 22:38:59,852: DEBUG: prediction: PredictionPipeline: All expected CT columns in order: ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend', 'City']]
[2025-07-25 22:38:59,852: INFO: prediction: Received raw input data for prediction. Shape: (1, 14)]
[2025-07-25 22:38:59,852: DEBUG: prediction: PredictionPipeline: raw_input_data dtypes (from Flask form):
City        object
Date        object
PM2.5      float64
PM10       float64
NO         float64
NO2        float64
NOx        float64
NH3        float64
CO         float64
SO2        float64
O3         float64
Benzene    float64
Toluene    float64
Xylene     float64
dtype: object]
[2025-07-25 22:38:59,900: DEBUG: prediction: PredictionPipeline: raw_input_data head (from Flask form):
        City        Date  ...  Toluene  Xylene
0  Ahmedabad  2019-06-06  ...      3.4    0.12

[1 rows x 14 columns]]
[2025-07-25 22:38:59,924: DEBUG: prediction: Date features engineered for prediction input.]
[2025-07-25 22:38:59,924: DEBUG: prediction: Dropped column 'Xylene' from prediction input.]
[2025-07-25 22:38:59,924: DEBUG: prediction: Dropped column 'Date' from prediction input.]
[2025-07-25 22:38:59,924: DEBUG: prediction: PredictionPipeline: data_to_transform columns BEFORE reindex: ['City', 'PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend']]
[2025-07-25 22:38:59,933: DEBUG: prediction: PredictionPipeline: data_to_transform dtypes BEFORE reindex:
City          object
PM2.5        float64
PM10         float64
NO           float64
NO2          float64
NOx          float64
NH3          float64
CO           float64
SO2          float64
O3           float64
Benzene      float64
Toluene      float64
Year           int32
Month          int32
Day            int32
DayOfWeek      int32
IsWeekend      int32
dtype: object]
[2025-07-25 22:38:59,933: DEBUG: prediction: PredictionPipeline: data_for_ct columns AFTER reindex: ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend', 'City']]
[2025-07-25 22:38:59,937: DEBUG: prediction: PredictionPipeline: data_for_ct dtypes AFTER reindex:
PM2.5        float64
PM10         float64
NO           float64
NO2          float64
NOx          float64
NH3          float64
CO           float64
SO2          float64
O3           float64
Benzene      float64
Toluene      float64
Year           int32
Month          int32
Day            int32
DayOfWeek      int32
IsWeekend      int32
City          object
dtype: object]
[2025-07-25 22:38:59,968: DEBUG: prediction: PredictionPipeline: data_for_ct head AFTER reindex:
   PM2.5   PM10    NO  ...  DayOfWeek  IsWeekend       City
0   54.3  120.5  10.2  ...          3          0  Ahmedabad

[1 rows x 17 columns]]
[2025-07-25 22:38:59,979: INFO: prediction: Prediction input data transformed using loaded preprocessor.]
[2025-07-25 22:39:00,011: INFO: prediction: Prediction made successfully.]
[2025-07-25 22:39:00,018: INFO: prediction: Inverse log1p transformation applied to prediction.]
[2025-07-25 22:39:00,024: INFO: app: Prediction successful. Predicted AQI: 64906244348629570114206780772629692552599946966349783814750863360.00]
[2025-07-25 22:39:00,092: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 22:39:00] "POST /predict HTTP/1.1" 200 -]
[2025-07-25 22:39:00,192: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 22:39:00] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -]
[2025-07-25 22:39:00,794: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 22:39:00] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -]
[2025-07-25 23:11:33,106: INFO: main: >>>>>> stage Data Ingestion Stage started <<<<<<]
[2025-07-25 23:11:33,106: INFO: common: yaml file: config\config.yaml loaded successfully]
[2025-07-25 23:11:33,106: INFO: common: yaml file: params.yaml loaded successfully]
[2025-07-25 23:11:33,120: INFO: common: yaml file: schema.yaml loaded successfully]
[2025-07-25 23:11:33,137: INFO: configuration: Debug: Schema loaded into Configuration Manager:{'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-25 23:11:33,140: INFO: common: created directory at artifacts]
[2025-07-25 23:11:33,143: INFO: common: created directory at artifacts/data_ingestion]
[2025-07-25 23:11:35,277: INFO: data_ingestion: artifacts/data_ingestion/data.zip downloaded! with following info: 
Connection: close
Content-Length: 752473
Cache-Control: max-age=300
Content-Security-Policy: default-src 'none'; style-src 'unsafe-inline'; sandbox
Content-Type: application/zip
ETag: "65fb8631317f9b204b40b708621b0d20cf4c66c698cb4521e6f795e6600ac414"
Strict-Transport-Security: max-age=31536000
X-Content-Type-Options: nosniff
X-Frame-Options: deny
X-XSS-Protection: 1; mode=block
X-GitHub-Request-Id: CA10:DEAC7:E0C1:1F1BB:6883C1C8
Accept-Ranges: bytes
Date: Fri, 25 Jul 2025 17:41:33 GMT
Via: 1.1 varnish
X-Served-By: cache-hyd1100032-HYD
X-Cache: MISS
X-Cache-Hits: 0
X-Timer: S1753465294.543535,VS0,VE266
Vary: Authorization,Accept-Encoding
Access-Control-Allow-Origin: *
Cross-Origin-Resource-Policy: cross-origin
X-Fastly-Request-ID: 69e920a389483e9591b75321d88c94d50c469a33
Expires: Fri, 25 Jul 2025 17:46:33 GMT
Source-Age: 0

]
[2025-07-25 23:11:35,343: INFO: main: >>>>>> stage Data Ingestion Stage completed <<<<<<

x==========x]
[2025-07-25 23:11:35,343: INFO: main: >>>>>> stage Data Validation Stage started <<<<<<]
[2025-07-25 23:11:35,358: INFO: common: yaml file: config\config.yaml loaded successfully]
[2025-07-25 23:11:35,362: INFO: common: yaml file: params.yaml loaded successfully]
[2025-07-25 23:11:35,365: INFO: common: yaml file: schema.yaml loaded successfully]
[2025-07-25 23:11:35,365: INFO: configuration: Debug: Schema loaded into Configuration Manager:{'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-25 23:11:35,365: INFO: common: created directory at artifacts]
[2025-07-25 23:11:35,365: INFO: common: created directory at artifacts/data_validation]
[2025-07-25 23:11:35,460: INFO: data_validation: Data loaded from artifacts/data_ingestion/city_day.csv. Data columns: ['City', 'Date', 'PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Xylene', 'AQI', 'AQI_Bucket']]
[2025-07-25 23:11:35,460: INFO: data_validation: Set of columns from loaded data: {'Date', 'NOx', 'PM10', 'O3', 'CO', 'AQI_Bucket', 'Toluene', 'AQI', 'Xylene', 'NO', 'NH3', 'City', 'NO2', 'Benzene', 'PM2.5', 'SO2'}]
[2025-07-25 23:11:35,460: INFO: data_validation: Raw self.config.all_schema type: <class 'box.config_box.ConfigBox'>]
[2025-07-25 23:11:35,462: INFO: data_validation: Raw self.config.all_schema content: {'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-25 23:11:35,462: INFO: data_validation: Set of columns from schema: {'Date', 'NOx', 'PM10', 'O3', 'CO', 'AQI_Bucket', 'Toluene', 'AQI', 'Xylene', 'NO', 'NH3', 'City', 'NO2', 'Benzene', 'PM2.5', 'SO2'}]
[2025-07-25 23:11:35,463: INFO: data_validation: Data validation completed: Schema validation successful.]
[2025-07-25 23:11:35,464: INFO: main: >>>>>> stage Data Validation Stage completed <<<<<<

x==========x]
[2025-07-25 23:11:35,465: INFO: main: >>>>>> stage Data Transformation Stage started <<<<<<]
[2025-07-25 23:11:35,471: INFO: common: yaml file: config\config.yaml loaded successfully]
[2025-07-25 23:11:35,479: INFO: common: yaml file: params.yaml loaded successfully]
[2025-07-25 23:11:35,483: INFO: common: yaml file: schema.yaml loaded successfully]
[2025-07-25 23:11:35,483: INFO: configuration: Debug: Schema loaded into Configuration Manager:{'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-25 23:11:35,485: INFO: common: created directory at artifacts]
[2025-07-25 23:11:35,487: INFO: common: created directory at artifacts/data_transformation]
[2025-07-25 23:11:35,571: INFO: data_transformation: Original data loaded. Shape: (29531, 16)]
[2025-07-25 23:11:35,590: INFO: data_transformation: Dropped 4681 rows with NaN in AQI or AQI_Bucket. New shape: (24850, 16)]
[2025-07-25 23:11:35,619: INFO: data_transformation: Date features engineered.]
[2025-07-25 23:11:35,630: INFO: data_transformation: Columns explicitly dropped from features (X) before CT: ['Xylene', 'Date']. New X shape: (24850, 17)]
[2025-07-25 23:11:35,634: INFO: data_transformation: Data split into train ((19880, 17)) and test ((4970, 17)) sets.]
[2025-07-25 23:11:35,634: INFO: data_transformation: CT Config - numerical_cols (from params): ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend']]
[2025-07-25 23:11:35,634: INFO: data_transformation: CT Config - columns_to_log_transform (from params): ['PM2.5', 'PM10', 'CO', 'NH3', 'NO', 'NO2', 'NOx', 'SO2', 'O3', 'Benzene', 'Toluene', 'AQI']]
[2025-07-25 23:11:35,640: INFO: data_transformation: CT Config - num_cols_to_log (derived for CT): ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene']]
[2025-07-25 23:11:35,640: INFO: data_transformation: CT Config - num_cols_no_log (derived for CT): ['Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend']]
[2025-07-25 23:11:35,641: INFO: data_transformation: CT Config - categorical_cols (from params): ['City']]
[2025-07-25 23:11:35,642: INFO: data_transformation: X_train columns before ColumnTransformer fit_transform: ['City', 'PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend']]
[2025-07-25 23:11:35,762: INFO: data_transformation: ColumnTransformer fitted on X_train and transformed X_train, X_test.]
[2025-07-25 23:11:35,762: INFO: data_transformation: Applying log1p transformation to target column 'AQI' in training and test sets.]
[2025-07-25 23:11:35,764: WARNING: data_transformation: get_feature_names_out() not available. Transformed DataFrame column names might be generic.]
[2025-07-25 23:11:37,202: INFO: data_transformation: Transformed train data saved to artifacts/data_transformation/train.csv. Shape: (19880, 43)]
[2025-07-25 23:11:37,202: INFO: data_transformation: Transformed test data saved to artifacts/data_transformation/test.csv. Shape: (4970, 43)]
[2025-07-25 23:11:37,242: INFO: data_transformation: Preprocessor object saved to artifacts/data_transformation/preprocessor.joblib]
[2025-07-25 23:11:37,255: INFO: main: >>>>>> stage Data Transformation Stage completed <<<<<<

x==========x]
[2025-07-25 23:11:37,262: INFO: main: >>>>>> stage Model Trainer Stage started <<<<<<]
[2025-07-25 23:11:37,268: INFO: common: yaml file: config\config.yaml loaded successfully]
[2025-07-25 23:11:37,275: INFO: common: yaml file: params.yaml loaded successfully]
[2025-07-25 23:11:37,280: INFO: common: yaml file: schema.yaml loaded successfully]
[2025-07-25 23:11:37,282: INFO: configuration: Debug: Schema loaded into Configuration Manager:{'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-25 23:11:37,285: INFO: common: created directory at artifacts]
[2025-07-25 23:11:37,287: INFO: common: created directory at artifacts/model_trainer]
[2025-07-25 23:11:37,547: INFO: model_trainer: Applying log1p transformation to target: AQI]
[2025-07-25 23:11:37,547: INFO: model_trainer: Training CatBoostRegressor with parameters: {'iterations': 1000, 'learning_rate': 0.05, 'depth': 8, 'loss_function': 'RMSE', 'random_state': 42, 'verbose': 0}]
[2025-07-25 23:11:53,991: INFO: model_trainer: CatBoostRegressor model training completed.]
[2025-07-25 23:11:54,002: INFO: model_trainer: Trained CatBoostRegressor model saved to artifacts/model_trainer\model.joblib]
[2025-07-25 23:11:54,006: INFO: main: >>>>>> stage Model Trainer Stage completed <<<<<<

x==========x]
[2025-07-25 23:11:54,006: INFO: main: >>>>>> stage Model Evaluation Stage started <<<<<<]
[2025-07-25 23:11:54,012: INFO: common: yaml file: config\config.yaml loaded successfully]
[2025-07-25 23:11:54,017: INFO: common: yaml file: params.yaml loaded successfully]
[2025-07-25 23:11:54,020: INFO: common: yaml file: schema.yaml loaded successfully]
[2025-07-25 23:11:54,020: INFO: configuration: Debug: Schema loaded into Configuration Manager:{'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-25 23:11:54,022: INFO: common: created directory at artifacts]
[2025-07-25 23:11:54,022: INFO: common: created directory at artifacts/model_evaluation]
[2025-07-25 23:11:54,593: INFO: model_evaluation: Raw model predictions (log-transformed) obtained.]
[2025-07-25 23:11:54,595: INFO: model_evaluation: Inverse log1p transformation applied to both actuals and predictions for evaluation.]
[2025-07-25 23:11:54,598: INFO: common: json file saved at: artifacts\model_evaluation\metrics.json]
[2025-07-25 23:11:54,599: INFO: model_evaluation: Metrics saved locally to artifacts/model_evaluation/metrics.json]
[2025-07-25 23:11:54,616: INFO: model_evaluation: Model parameters logged to MLflow.]
[2025-07-25 23:11:54,627: INFO: model_evaluation: Metrics logged to MLflow.]
[2025-07-25 23:12:02,529: INFO: model_evaluation: Model logged to MLflow.]
[2025-07-25 23:12:02,536: INFO: main: >>>>>> stage Model Evaluation Stage completed <<<<<<

x==========x]
[2025-07-25 23:12:18,212: INFO: _internal: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8080
 * Running on http://192.168.1.5:8080]
[2025-07-25 23:12:18,212: INFO: _internal: [33mPress CTRL+C to quit[0m]
[2025-07-25 23:12:36,950: INFO: app: Home page requested.]
[2025-07-25 23:12:36,972: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:12:36] "GET / HTTP/1.1" 200 -]
[2025-07-25 23:12:37,048: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:12:37] "[33mGET /static/css2/nunito-font.css HTTP/1.1[0m" 404 -]
[2025-07-25 23:12:37,130: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:12:37] "[33mGET /static/css/styles.css HTTP/1.1[0m" 404 -]
[2025-07-25 23:12:37,149: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:12:37] "[33mGET /static/css2/style.css HTTP/1.1[0m" 404 -]
[2025-07-25 23:12:37,151: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:12:37] "[33mGET /static/js/scripts.js HTTP/1.1[0m" 404 -]
[2025-07-25 23:12:37,228: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:12:37] "[33mGET /static/assets/img/air-pollution.jpg HTTP/1.1[0m" 404 -]
[2025-07-25 23:12:37,402: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:12:37] "[36mGET /static/assets/img/form-v9.jpg HTTP/1.1[0m" 304 -]
[2025-07-25 23:13:29,348: INFO: app: Received prediction request with data: [{'City': 'Bengaluru', 'Date': '2019-01-29', 'PM2.5': 54.3, 'PM10': 120.5, 'NO': 10.2, 'NO2': 30.5, 'NOx': 40.7, 'NH3': 12.4, 'CO': 1.2, 'SO2': 22.1, 'O3': 19.6, 'Benzene': 0.56, 'Toluene': 3.4, 'Xylene': 0.12}]]
[2025-07-25 23:13:29,358: INFO: common: yaml file: config\config.yaml loaded successfully]
[2025-07-25 23:13:29,379: INFO: common: yaml file: params.yaml loaded successfully]
[2025-07-25 23:13:29,386: INFO: common: yaml file: schema.yaml loaded successfully]
[2025-07-25 23:13:29,394: INFO: configuration: Debug: Schema loaded into Configuration Manager:{'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-25 23:13:29,398: INFO: common: created directory at artifacts]
[2025-07-25 23:13:29,400: INFO: common: created directory at artifacts/data_transformation]
[2025-07-25 23:13:34,508: INFO: prediction: PredictionPipeline initialized: preprocessor and model loaded.]
[2025-07-25 23:13:34,508: DEBUG: prediction: PredictionPipeline: CT expects numerical columns to log: ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene']]
[2025-07-25 23:13:34,508: DEBUG: prediction: PredictionPipeline: CT expects numerical columns NOT to log: ['Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend']]
[2025-07-25 23:13:34,508: DEBUG: prediction: PredictionPipeline: CT expects categorical columns: ['City']]
[2025-07-25 23:13:34,517: DEBUG: prediction: PredictionPipeline: All expected CT columns in order: ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend', 'City']]
[2025-07-25 23:13:34,517: INFO: prediction: Received raw input data for prediction. Shape: (1, 14)]
[2025-07-25 23:13:34,522: DEBUG: prediction: PredictionPipeline: raw_input_data dtypes (from Flask form):
City        object
Date        object
PM2.5      float64
PM10       float64
NO         float64
NO2        float64
NOx        float64
NH3        float64
CO         float64
SO2        float64
O3         float64
Benzene    float64
Toluene    float64
Xylene     float64
dtype: object]
[2025-07-25 23:13:34,592: DEBUG: prediction: PredictionPipeline: raw_input_data head (from Flask form):
        City        Date  ...  Toluene  Xylene
0  Bengaluru  2019-01-29  ...      3.4    0.12

[1 rows x 14 columns]]
[2025-07-25 23:13:34,619: DEBUG: prediction: Date features engineered for prediction input.]
[2025-07-25 23:13:34,623: DEBUG: prediction: Dropped column 'Xylene' from prediction input.]
[2025-07-25 23:13:34,628: DEBUG: prediction: Dropped column 'Date' from prediction input.]
[2025-07-25 23:13:34,628: DEBUG: prediction: PredictionPipeline: data_to_transform columns BEFORE reindex: ['City', 'PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend']]
[2025-07-25 23:13:34,631: DEBUG: prediction: PredictionPipeline: data_to_transform dtypes BEFORE reindex:
City          object
PM2.5        float64
PM10         float64
NO           float64
NO2          float64
NOx          float64
NH3          float64
CO           float64
SO2          float64
O3           float64
Benzene      float64
Toluene      float64
Year           int32
Month          int32
Day            int32
DayOfWeek      int32
IsWeekend      int32
dtype: object]
[2025-07-25 23:13:34,637: DEBUG: prediction: PredictionPipeline: data_for_ct columns AFTER reindex: ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend', 'City']]
[2025-07-25 23:13:34,642: DEBUG: prediction: PredictionPipeline: data_for_ct dtypes AFTER reindex:
PM2.5        float64
PM10         float64
NO           float64
NO2          float64
NOx          float64
NH3          float64
CO           float64
SO2          float64
O3           float64
Benzene      float64
Toluene      float64
Year           int32
Month          int32
Day            int32
DayOfWeek      int32
IsWeekend      int32
City          object
dtype: object]
[2025-07-25 23:13:34,708: DEBUG: prediction: PredictionPipeline: data_for_ct head AFTER reindex:
   PM2.5   PM10    NO  ...  DayOfWeek  IsWeekend       City
0   54.3  120.5  10.2  ...          1          0  Bengaluru

[1 rows x 17 columns]]
[2025-07-25 23:13:34,752: INFO: prediction: Prediction input data transformed using loaded preprocessor.]
[2025-07-25 23:13:34,752: DEBUG: prediction: PredictionPipeline: Transformed data shape: (1, 42)]
[2025-07-25 23:13:34,754: DEBUG: prediction: PredictionPipeline: Transformed data sample (first 5 values): [ 0.12055986  0.40494121 -0.06689139  0.43109678  0.65679903]]
[2025-07-25 23:13:34,768: INFO: prediction: Prediction made successfully.]
[2025-07-25 23:13:34,770: DEBUG: prediction: PredictionPipeline: Raw model prediction (before inverse transform): 4.7464600555617675]
[2025-07-25 23:13:34,770: INFO: prediction: Inverse log1p transformation applied to prediction.]
[2025-07-25 23:13:34,777: DEBUG: prediction: PredictionPipeline: Final prediction (after inverse transform): 114.17584593351152]
[2025-07-25 23:13:34,777: INFO: app: Prediction successful. Predicted AQI: 114.18]
[2025-07-25 23:13:34,795: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:13:34] "POST /predict HTTP/1.1" 200 -]
[2025-07-25 23:13:34,838: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:13:34] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -]
[2025-07-25 23:24:35,571: INFO: app: Home page requested.]
[2025-07-25 23:24:35,587: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:24:35] "GET / HTTP/1.1" 200 -]
[2025-07-25 23:24:35,663: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:24:35] "[33mGET /static/css/styles.css HTTP/1.1[0m" 404 -]
[2025-07-25 23:24:35,688: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:24:35] "[33mGET /static/css2/nunito-font.css HTTP/1.1[0m" 404 -]
[2025-07-25 23:24:35,694: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:24:35] "[33mGET /static/js/scripts.js HTTP/1.1[0m" 404 -]
[2025-07-25 23:24:35,695: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:24:35] "[33mGET /static/css2/style.css HTTP/1.1[0m" 404 -]
[2025-07-25 23:24:35,752: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:24:35] "[33mGET /static/assets/img/air-pollution.jpg HTTP/1.1[0m" 404 -]
[2025-07-25 23:24:35,762: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:24:35] "[36mGET /static/assets/img/form-v9.jpg HTTP/1.1[0m" 304 -]
[2025-07-25 23:43:06,594: INFO: main: >>>>>> stage Data Ingestion Stage started <<<<<<]
[2025-07-25 23:43:06,606: INFO: common: yaml file: config\config.yaml loaded successfully]
[2025-07-25 23:43:06,629: INFO: common: yaml file: params.yaml loaded successfully]
[2025-07-25 23:43:06,646: INFO: common: yaml file: schema.yaml loaded successfully]
[2025-07-25 23:43:06,660: INFO: configuration: Debug: Schema loaded into Configuration Manager:{'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-25 23:43:06,662: INFO: common: created directory at artifacts]
[2025-07-25 23:43:06,662: INFO: common: created directory at artifacts/data_ingestion]
[2025-07-25 23:43:10,001: INFO: data_ingestion: artifacts/data_ingestion/data.zip downloaded! with following info: 
Connection: close
Content-Length: 752473
Cache-Control: max-age=300
Content-Security-Policy: default-src 'none'; style-src 'unsafe-inline'; sandbox
Content-Type: application/zip
ETag: "65fb8631317f9b204b40b708621b0d20cf4c66c698cb4521e6f795e6600ac414"
Strict-Transport-Security: max-age=31536000
X-Content-Type-Options: nosniff
X-Frame-Options: deny
X-XSS-Protection: 1; mode=block
X-GitHub-Request-Id: CA10:DEAC7:E0C1:1F1BB:6883C1C8
Accept-Ranges: bytes
Date: Fri, 25 Jul 2025 18:13:07 GMT
Via: 1.1 varnish
X-Served-By: cache-hyd1100032-HYD
X-Cache: HIT
X-Cache-Hits: 0
X-Timer: S1753467187.943562,VS0,VE277
Vary: Authorization,Accept-Encoding
Access-Control-Allow-Origin: *
Cross-Origin-Resource-Policy: cross-origin
X-Fastly-Request-ID: 346d9de6bbc87c44ffc7dbd37381327613ecfb53
Expires: Fri, 25 Jul 2025 18:18:07 GMT
Source-Age: 0

]
[2025-07-25 23:43:10,139: INFO: main: >>>>>> stage Data Ingestion Stage completed <<<<<<

x==========x]
[2025-07-25 23:43:10,140: INFO: main: >>>>>> stage Data Validation Stage started <<<<<<]
[2025-07-25 23:43:10,152: INFO: common: yaml file: config\config.yaml loaded successfully]
[2025-07-25 23:43:10,156: INFO: common: yaml file: params.yaml loaded successfully]
[2025-07-25 23:43:10,175: INFO: common: yaml file: schema.yaml loaded successfully]
[2025-07-25 23:43:10,175: INFO: configuration: Debug: Schema loaded into Configuration Manager:{'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-25 23:43:10,175: INFO: common: created directory at artifacts]
[2025-07-25 23:43:10,182: INFO: common: created directory at artifacts/data_validation]
[2025-07-25 23:43:10,370: INFO: data_validation: Data loaded from artifacts/data_ingestion/city_day.csv. Data columns: ['City', 'Date', 'PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Xylene', 'AQI', 'AQI_Bucket']]
[2025-07-25 23:43:10,370: INFO: data_validation: Set of columns from loaded data: {'NO', 'NH3', 'Toluene', 'NO2', 'AQI_Bucket', 'PM10', 'PM2.5', 'SO2', 'Date', 'O3', 'Benzene', 'AQI', 'NOx', 'Xylene', 'CO', 'City'}]
[2025-07-25 23:43:10,370: INFO: data_validation: Raw self.config.all_schema type: <class 'box.config_box.ConfigBox'>]
[2025-07-25 23:43:10,370: INFO: data_validation: Raw self.config.all_schema content: {'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-25 23:43:10,370: INFO: data_validation: Set of columns from schema: {'NO', 'NH3', 'Toluene', 'NO2', 'AQI_Bucket', 'PM10', 'PM2.5', 'SO2', 'Date', 'O3', 'Benzene', 'AQI', 'NOx', 'Xylene', 'CO', 'City'}]
[2025-07-25 23:43:10,370: INFO: data_validation: Data validation completed: Schema validation successful.]
[2025-07-25 23:43:10,381: INFO: main: >>>>>> stage Data Validation Stage completed <<<<<<

x==========x]
[2025-07-25 23:43:10,381: INFO: main: >>>>>> stage Data Transformation Stage started <<<<<<]
[2025-07-25 23:43:10,407: INFO: common: yaml file: config\config.yaml loaded successfully]
[2025-07-25 23:43:10,422: INFO: common: yaml file: params.yaml loaded successfully]
[2025-07-25 23:43:10,440: INFO: common: yaml file: schema.yaml loaded successfully]
[2025-07-25 23:43:10,441: INFO: configuration: Debug: Schema loaded into Configuration Manager:{'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-25 23:43:10,443: INFO: common: created directory at artifacts]
[2025-07-25 23:43:10,443: INFO: common: created directory at artifacts/data_transformation]
[2025-07-25 23:43:10,586: INFO: data_transformation: Original data loaded. Shape: (29531, 16)]
[2025-07-25 23:43:10,624: INFO: data_transformation: Dropped 4681 rows with NaN in AQI or AQI_Bucket. New shape: (24850, 16)]
[2025-07-25 23:43:10,691: INFO: data_transformation: Date features engineered.]
[2025-07-25 23:43:10,718: INFO: data_transformation: Columns explicitly dropped from features (X) before CT: ['Xylene', 'Date']. New X shape: (24850, 17)]
[2025-07-25 23:43:10,742: INFO: data_transformation: Data split into train ((19880, 17)) and test ((4970, 17)) sets.]
[2025-07-25 23:43:10,742: INFO: data_transformation: CT Config - numerical_cols (from params): ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend']]
[2025-07-25 23:43:10,742: INFO: data_transformation: CT Config - columns_to_log_transform (from params): ['PM2.5', 'PM10', 'CO', 'NH3', 'NO', 'NO2', 'NOx', 'SO2', 'O3', 'Benzene', 'Toluene', 'AQI']]
[2025-07-25 23:43:10,742: INFO: data_transformation: CT Config - num_cols_to_log (derived for CT): ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene']]
[2025-07-25 23:43:10,745: INFO: data_transformation: CT Config - num_cols_no_log (derived for CT): ['Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend']]
[2025-07-25 23:43:10,745: INFO: data_transformation: CT Config - categorical_cols (from params): ['City']]
[2025-07-25 23:43:10,747: INFO: data_transformation: X_train columns before ColumnTransformer fit_transform: ['City', 'PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend']]
[2025-07-25 23:43:10,995: INFO: data_transformation: ColumnTransformer fitted on X_train and transformed X_train, X_test.]
[2025-07-25 23:43:10,995: INFO: data_transformation: Applying log1p transformation to target column 'AQI' in training and test sets.]
[2025-07-25 23:43:10,997: WARNING: data_transformation: get_feature_names_out() not available. Transformed DataFrame column names might be generic.]
[2025-07-25 23:43:13,645: INFO: data_transformation: Transformed train data saved to artifacts/data_transformation/train.csv. Shape: (19880, 43)]
[2025-07-25 23:43:13,645: INFO: data_transformation: Transformed test data saved to artifacts/data_transformation/test.csv. Shape: (4970, 43)]
[2025-07-25 23:43:13,651: INFO: data_transformation: Preprocessor object saved to artifacts/data_transformation/preprocessor.joblib]
[2025-07-25 23:43:13,679: INFO: main: >>>>>> stage Data Transformation Stage completed <<<<<<

x==========x]
[2025-07-25 23:43:13,679: INFO: main: >>>>>> stage Model Trainer Stage started <<<<<<]
[2025-07-25 23:43:13,692: INFO: common: yaml file: config\config.yaml loaded successfully]
[2025-07-25 23:43:13,765: INFO: common: yaml file: params.yaml loaded successfully]
[2025-07-25 23:43:13,807: INFO: common: yaml file: schema.yaml loaded successfully]
[2025-07-25 23:43:13,825: INFO: configuration: Debug: Schema loaded into Configuration Manager:{'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-25 23:43:13,831: INFO: common: created directory at artifacts]
[2025-07-25 23:43:13,888: INFO: common: created directory at artifacts/model_trainer]
[2025-07-25 23:43:14,606: INFO: model_trainer: Applying log1p transformation to target: AQI]
[2025-07-25 23:43:14,606: INFO: model_trainer: Training CatBoostRegressor with parameters: {'iterations': 1000, 'learning_rate': 0.05, 'depth': 8, 'loss_function': 'RMSE', 'random_state': 42, 'verbose': 0}]
[2025-07-25 23:43:50,247: INFO: model_trainer: CatBoostRegressor model training completed.]
[2025-07-25 23:43:50,271: INFO: model_trainer: Trained CatBoostRegressor model saved to artifacts/model_trainer\model.joblib]
[2025-07-25 23:43:50,281: INFO: main: >>>>>> stage Model Trainer Stage completed <<<<<<

x==========x]
[2025-07-25 23:43:50,285: INFO: main: >>>>>> stage Model Evaluation Stage started <<<<<<]
[2025-07-25 23:43:50,307: INFO: common: yaml file: config\config.yaml loaded successfully]
[2025-07-25 23:43:50,322: INFO: common: yaml file: params.yaml loaded successfully]
[2025-07-25 23:43:50,336: INFO: common: yaml file: schema.yaml loaded successfully]
[2025-07-25 23:43:50,341: INFO: configuration: Debug: Schema loaded into Configuration Manager:{'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-25 23:43:50,342: INFO: common: created directory at artifacts]
[2025-07-25 23:43:50,342: INFO: common: created directory at artifacts/model_evaluation]
[2025-07-25 23:43:51,388: INFO: model_evaluation: Raw model predictions (log-transformed) obtained.]
[2025-07-25 23:43:51,388: INFO: model_evaluation: Inverse log1p transformation applied to both actuals and predictions for evaluation.]
[2025-07-25 23:43:51,403: INFO: common: json file saved at: artifacts\model_evaluation\metrics.json]
[2025-07-25 23:43:51,403: INFO: model_evaluation: Metrics saved locally to artifacts/model_evaluation/metrics.json]
[2025-07-25 23:43:51,443: INFO: model_evaluation: Model parameters logged to MLflow.]
[2025-07-25 23:43:51,470: INFO: model_evaluation: Metrics logged to MLflow.]
[2025-07-25 23:44:05,318: INFO: model_evaluation: Model logged to MLflow.]
[2025-07-25 23:44:05,334: INFO: main: >>>>>> stage Model Evaluation Stage completed <<<<<<

x==========x]
[2025-07-25 23:45:59,587: INFO: _internal: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8080
 * Running on http://192.168.1.5:8080]
[2025-07-25 23:45:59,587: INFO: _internal: [33mPress CTRL+C to quit[0m]
[2025-07-25 23:46:05,073: INFO: app: Home page requested.]
[2025-07-25 23:46:05,250: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:46:05] "GET / HTTP/1.1" 200 -]
[2025-07-25 23:46:05,336: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:46:05] "[33mGET /static/js/scripts.js HTTP/1.1[0m" 404 -]
[2025-07-25 23:46:05,460: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:46:05] "GET /static/css/style.css HTTP/1.1" 200 -]
[2025-07-25 23:46:05,488: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:46:05] "GET /static/assets/img/air_pollution.jpg HTTP/1.1" 200 -]
[2025-07-25 23:46:05,490: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:46:05] "[36mGET /static/assets/img/form-v9.jpg HTTP/1.1[0m" 304 -]
[2025-07-25 23:47:17,538: INFO: app: Home page requested.]
[2025-07-25 23:47:17,538: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:47:17] "GET / HTTP/1.1" 200 -]
[2025-07-25 23:47:17,621: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:47:17] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -]
[2025-07-25 23:47:17,642: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:47:17] "[33mGET /static/js/scripts.js HTTP/1.1[0m" 404 -]
[2025-07-25 23:47:17,690: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:47:17] "[36mGET /static/assets/img/air_pollution.jpg HTTP/1.1[0m" 304 -]
[2025-07-25 23:47:17,690: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:47:17] "[36mGET /static/assets/img/form-v9.jpg HTTP/1.1[0m" 304 -]
[2025-07-25 23:47:30,036: INFO: app: Home page requested.]
[2025-07-25 23:47:30,036: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:47:30] "GET / HTTP/1.1" 200 -]
[2025-07-25 23:47:30,106: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:47:30] "[33mGET /static/js/scripts.js HTTP/1.1[0m" 404 -]
[2025-07-25 23:47:30,108: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:47:30] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -]
[2025-07-25 23:47:30,126: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:47:30] "[36mGET /static/assets/img/air_pollution.jpg HTTP/1.1[0m" 304 -]
[2025-07-25 23:47:30,133: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:47:30] "[36mGET /static/assets/img/form-v9.jpg HTTP/1.1[0m" 304 -]
[2025-07-25 23:47:31,220: INFO: app: Home page requested.]
[2025-07-25 23:47:31,222: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:47:31] "GET / HTTP/1.1" 200 -]
[2025-07-25 23:47:31,262: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:47:31] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -]
[2025-07-25 23:47:31,264: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:47:31] "[33mGET /static/js/scripts.js HTTP/1.1[0m" 404 -]
[2025-07-25 23:47:31,285: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:47:31] "[36mGET /static/assets/img/form-v9.jpg HTTP/1.1[0m" 304 -]
[2025-07-25 23:47:31,286: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:47:31] "[36mGET /static/assets/img/air_pollution.jpg HTTP/1.1[0m" 304 -]
[2025-07-25 23:48:15,683: INFO: app: Received prediction request with data: [{'City': 'Delhi', 'Date': '2025-07-10', 'PM2.5': 54.3, 'PM10': 120.5, 'NO': 10.2, 'NO2': 30.5, 'NOx': 40.7, 'NH3': 12.4, 'CO': 1.2, 'SO2': 22.1, 'O3': 19.6, 'Benzene': 0.56, 'Toluene': 3.4, 'Xylene': 0.12}]]
[2025-07-25 23:48:15,691: INFO: common: yaml file: config\config.yaml loaded successfully]
[2025-07-25 23:48:15,706: INFO: common: yaml file: params.yaml loaded successfully]
[2025-07-25 23:48:15,720: INFO: common: yaml file: schema.yaml loaded successfully]
[2025-07-25 23:48:15,724: INFO: configuration: Debug: Schema loaded into Configuration Manager:{'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-25 23:48:15,726: INFO: common: created directory at artifacts]
[2025-07-25 23:48:15,736: INFO: common: created directory at artifacts/data_transformation]
[2025-07-25 23:48:20,252: INFO: prediction: PredictionPipeline initialized: preprocessor and model loaded.]
[2025-07-25 23:48:20,252: DEBUG: prediction: PredictionPipeline: CT expects numerical columns to log: ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene']]
[2025-07-25 23:48:20,252: DEBUG: prediction: PredictionPipeline: CT expects numerical columns NOT to log: ['Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend']]
[2025-07-25 23:48:20,252: DEBUG: prediction: PredictionPipeline: CT expects categorical columns: ['City']]
[2025-07-25 23:48:20,252: DEBUG: prediction: PredictionPipeline: All expected CT columns in order: ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend', 'City']]
[2025-07-25 23:48:20,252: INFO: prediction: Received raw input data for prediction. Shape: (1, 14)]
[2025-07-25 23:48:20,257: DEBUG: prediction: PredictionPipeline: raw_input_data dtypes (from Flask form):
City        object
Date        object
PM2.5      float64
PM10       float64
NO         float64
NO2        float64
NOx        float64
NH3        float64
CO         float64
SO2        float64
O3         float64
Benzene    float64
Toluene    float64
Xylene     float64
dtype: object]
[2025-07-25 23:48:20,332: DEBUG: prediction: PredictionPipeline: raw_input_data head (from Flask form):
    City        Date  PM2.5  ...  Benzene  Toluene  Xylene
0  Delhi  2025-07-10   54.3  ...     0.56      3.4    0.12

[1 rows x 14 columns]]
[2025-07-25 23:48:20,356: DEBUG: prediction: Date features engineered for prediction input.]
[2025-07-25 23:48:20,356: DEBUG: prediction: Dropped column 'Xylene' from prediction input.]
[2025-07-25 23:48:20,356: DEBUG: prediction: Dropped column 'Date' from prediction input.]
[2025-07-25 23:48:20,356: DEBUG: prediction: PredictionPipeline: data_to_transform columns BEFORE reindex: ['City', 'PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend']]
[2025-07-25 23:48:20,368: DEBUG: prediction: PredictionPipeline: data_to_transform dtypes BEFORE reindex:
City          object
PM2.5        float64
PM10         float64
NO           float64
NO2          float64
NOx          float64
NH3          float64
CO           float64
SO2          float64
O3           float64
Benzene      float64
Toluene      float64
Year           int32
Month          int32
Day            int32
DayOfWeek      int32
IsWeekend      int32
dtype: object]
[2025-07-25 23:48:20,372: DEBUG: prediction: PredictionPipeline: data_for_ct columns AFTER reindex: ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend', 'City']]
[2025-07-25 23:48:20,372: DEBUG: prediction: PredictionPipeline: data_for_ct dtypes AFTER reindex:
PM2.5        float64
PM10         float64
NO           float64
NO2          float64
NOx          float64
NH3          float64
CO           float64
SO2          float64
O3           float64
Benzene      float64
Toluene      float64
Year           int32
Month          int32
Day            int32
DayOfWeek      int32
IsWeekend      int32
City          object
dtype: object]
[2025-07-25 23:48:20,428: DEBUG: prediction: PredictionPipeline: data_for_ct head AFTER reindex:
   PM2.5   PM10    NO  ...  DayOfWeek  IsWeekend   City
0   54.3  120.5  10.2  ...          3          0  Delhi

[1 rows x 17 columns]]
[2025-07-25 23:48:20,454: INFO: prediction: Prediction input data transformed using loaded preprocessor.]
[2025-07-25 23:48:20,454: DEBUG: prediction: PredictionPipeline: Transformed data shape: (1, 42)]
[2025-07-25 23:48:20,454: DEBUG: prediction: PredictionPipeline: Transformed data sample (first 5 values): [ 0.12055986  0.40494121 -0.06689139  0.43109678  0.65679903]]
[2025-07-25 23:48:20,470: INFO: prediction: Prediction made successfully.]
[2025-07-25 23:48:20,470: DEBUG: prediction: PredictionPipeline: Raw model prediction (before inverse transform): 4.774055693875758]
[2025-07-25 23:48:20,470: INFO: prediction: Inverse log1p transformation applied to prediction.]
[2025-07-25 23:48:20,470: DEBUG: prediction: PredictionPipeline: Final prediction (after inverse transform): 117.39845742686978]
[2025-07-25 23:48:20,478: INFO: app: Prediction successful. Predicted AQI: 117.4 (Bucket: Moderate)]
[2025-07-25 23:48:20,589: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:48:20] "POST /predict HTTP/1.1" 200 -]
[2025-07-25 23:48:20,658: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:48:20] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -]
[2025-07-25 23:49:24,154: INFO: app: Home page requested.]
[2025-07-25 23:49:24,157: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:49:24] "GET / HTTP/1.1" 200 -]
[2025-07-25 23:49:24,207: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:49:24] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -]
[2025-07-25 23:49:24,219: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:49:24] "[33mGET /static/js/scripts.js HTTP/1.1[0m" 404 -]
[2025-07-25 23:49:24,254: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:49:24] "[36mGET /static/assets/img/form-v9.jpg HTTP/1.1[0m" 304 -]
[2025-07-25 23:49:24,256: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:49:24] "[36mGET /static/assets/img/air_pollution.jpg HTTP/1.1[0m" 304 -]
[2025-07-25 23:53:49,142: INFO: app: Home page requested.]
[2025-07-25 23:53:49,163: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:53:49] "GET / HTTP/1.1" 200 -]
[2025-07-25 23:53:49,247: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:53:49] "[33mGET /static/js/scripts.js HTTP/1.1[0m" 404 -]
[2025-07-25 23:53:49,274: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:53:49] "GET /static/css/style.css HTTP/1.1" 200 -]
[2025-07-25 23:53:49,300: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:53:49] "[36mGET /static/assets/img/air_pollution.jpg HTTP/1.1[0m" 304 -]
[2025-07-25 23:53:49,306: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:53:49] "[36mGET /static/assets/img/form-v9.jpg HTTP/1.1[0m" 304 -]
[2025-07-25 23:54:34,652: INFO: app: Received prediction request with data: [{'City': 'Amaravati', 'Date': '2025-07-12', 'PM2.5': 54.0, 'PM10': 120.0, 'NO': 10.0, 'NO2': 30.0, 'NOx': 40.0, 'NH3': 12.0, 'CO': 1.2, 'SO2': 22.1, 'O3': 19.6, 'Benzene': 0.56, 'Toluene': 3.4, 'Xylene': 0.12}]]
[2025-07-25 23:54:34,712: INFO: common: yaml file: config\config.yaml loaded successfully]
[2025-07-25 23:54:34,735: INFO: common: yaml file: params.yaml loaded successfully]
[2025-07-25 23:54:34,752: INFO: common: yaml file: schema.yaml loaded successfully]
[2025-07-25 23:54:34,757: INFO: configuration: Debug: Schema loaded into Configuration Manager:{'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-25 23:54:34,764: INFO: common: created directory at artifacts]
[2025-07-25 23:54:34,773: INFO: common: created directory at artifacts/data_transformation]
[2025-07-25 23:54:34,921: INFO: prediction: PredictionPipeline initialized: preprocessor and model loaded.]
[2025-07-25 23:54:34,921: DEBUG: prediction: PredictionPipeline: CT expects numerical columns to log: ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene']]
[2025-07-25 23:54:34,921: DEBUG: prediction: PredictionPipeline: CT expects numerical columns NOT to log: ['Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend']]
[2025-07-25 23:54:34,925: DEBUG: prediction: PredictionPipeline: CT expects categorical columns: ['City']]
[2025-07-25 23:54:34,925: DEBUG: prediction: PredictionPipeline: All expected CT columns in order: ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend', 'City']]
[2025-07-25 23:54:34,928: INFO: prediction: Received raw input data for prediction. Shape: (1, 14)]
[2025-07-25 23:54:34,954: DEBUG: prediction: PredictionPipeline: raw_input_data dtypes (from Flask form):
City        object
Date        object
PM2.5      float64
PM10       float64
NO         float64
NO2        float64
NOx        float64
NH3        float64
CO         float64
SO2        float64
O3         float64
Benzene    float64
Toluene    float64
Xylene     float64
dtype: object]
[2025-07-25 23:54:35,072: DEBUG: prediction: PredictionPipeline: raw_input_data head (from Flask form):
        City        Date  ...  Toluene  Xylene
0  Amaravati  2025-07-12  ...      3.4    0.12

[1 rows x 14 columns]]
[2025-07-25 23:54:35,122: DEBUG: prediction: Date features engineered for prediction input.]
[2025-07-25 23:54:35,125: DEBUG: prediction: Dropped column 'Xylene' from prediction input.]
[2025-07-25 23:54:35,130: DEBUG: prediction: Dropped column 'Date' from prediction input.]
[2025-07-25 23:54:35,130: DEBUG: prediction: PredictionPipeline: data_to_transform columns BEFORE reindex: ['City', 'PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend']]
[2025-07-25 23:54:35,136: DEBUG: prediction: PredictionPipeline: data_to_transform dtypes BEFORE reindex:
City          object
PM2.5        float64
PM10         float64
NO           float64
NO2          float64
NOx          float64
NH3          float64
CO           float64
SO2          float64
O3           float64
Benzene      float64
Toluene      float64
Year           int32
Month          int32
Day            int32
DayOfWeek      int32
IsWeekend      int32
dtype: object]
[2025-07-25 23:54:35,139: DEBUG: prediction: PredictionPipeline: data_for_ct columns AFTER reindex: ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend', 'City']]
[2025-07-25 23:54:35,143: DEBUG: prediction: PredictionPipeline: data_for_ct dtypes AFTER reindex:
PM2.5        float64
PM10         float64
NO           float64
NO2          float64
NOx          float64
NH3          float64
CO           float64
SO2          float64
O3           float64
Benzene      float64
Toluene      float64
Year           int32
Month          int32
Day            int32
DayOfWeek      int32
IsWeekend      int32
City          object
dtype: object]
[2025-07-25 23:54:35,276: DEBUG: prediction: PredictionPipeline: data_for_ct head AFTER reindex:
   PM2.5   PM10    NO  ...  DayOfWeek  IsWeekend       City
0   54.0  120.0  10.0  ...          5          1  Amaravati

[1 rows x 17 columns]]
[2025-07-25 23:54:35,404: INFO: prediction: Prediction input data transformed using loaded preprocessor.]
[2025-07-25 23:54:35,404: DEBUG: prediction: PredictionPipeline: Transformed data shape: (1, 42)]
[2025-07-25 23:54:35,412: DEBUG: prediction: PredictionPipeline: Transformed data sample (first 5 values): [ 0.11344182  0.39831453 -0.08686784  0.41077535  0.63827134]]
[2025-07-25 23:54:35,475: INFO: prediction: Prediction made successfully.]
[2025-07-25 23:54:35,475: DEBUG: prediction: PredictionPipeline: Raw model prediction (before inverse transform): 4.712002879868958]
[2025-07-25 23:54:35,475: INFO: prediction: Inverse log1p transformation applied to prediction.]
[2025-07-25 23:54:35,475: DEBUG: prediction: PredictionPipeline: Final prediction (after inverse transform): 110.27480693437488]
[2025-07-25 23:54:35,479: INFO: app: Prediction successful. Predicted AQI: 110.27 (Bucket: Moderate)]
[2025-07-25 23:54:35,480: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:54:35] "POST /predict HTTP/1.1" 200 -]
[2025-07-25 23:54:35,539: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:54:35] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -]
[2025-07-25 23:54:42,421: INFO: app: Home page requested.]
[2025-07-25 23:54:42,428: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:54:42] "GET / HTTP/1.1" 200 -]
[2025-07-25 23:54:42,515: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:54:42] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -]
[2025-07-25 23:54:42,518: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:54:42] "[33mGET /static/js/scripts.js HTTP/1.1[0m" 404 -]
[2025-07-25 23:54:42,563: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:54:42] "[36mGET /static/assets/img/form-v9.jpg HTTP/1.1[0m" 304 -]
[2025-07-25 23:54:42,575: INFO: _internal: 127.0.0.1 - - [25/Jul/2025 23:54:42] "[36mGET /static/assets/img/air_pollution.jpg HTTP/1.1[0m" 304 -]
[2025-07-26 00:00:52,116: INFO: app: Home page requested.]
[2025-07-26 00:00:52,128: INFO: _internal: 127.0.0.1 - - [26/Jul/2025 00:00:52] "GET / HTTP/1.1" 200 -]
[2025-07-26 00:00:52,201: INFO: _internal: 127.0.0.1 - - [26/Jul/2025 00:00:52] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -]
[2025-07-26 00:00:52,215: INFO: _internal: 127.0.0.1 - - [26/Jul/2025 00:00:52] "[33mGET /static/js/scripts.js HTTP/1.1[0m" 404 -]
[2025-07-26 00:00:52,274: INFO: _internal: 127.0.0.1 - - [26/Jul/2025 00:00:52] "[36mGET /static/assets/img/form-v9.jpg HTTP/1.1[0m" 304 -]
[2025-07-26 00:00:52,277: INFO: _internal: 127.0.0.1 - - [26/Jul/2025 00:00:52] "[33mGET /static/assets/img/air_pollution.jpg HTTP/1.1[0m" 404 -]
[2025-07-26 00:01:23,706: INFO: app: Home page requested.]
[2025-07-26 00:01:23,709: INFO: _internal: 127.0.0.1 - - [26/Jul/2025 00:01:23] "GET / HTTP/1.1" 200 -]
[2025-07-26 00:01:23,766: INFO: _internal: 127.0.0.1 - - [26/Jul/2025 00:01:23] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -]
[2025-07-26 00:01:23,794: INFO: _internal: 127.0.0.1 - - [26/Jul/2025 00:01:23] "[33mGET /static/js/scripts.js HTTP/1.1[0m" 404 -]
[2025-07-26 00:01:23,800: INFO: _internal: 127.0.0.1 - - [26/Jul/2025 00:01:23] "GET /static/assets/img/air_pollution.jpg HTTP/1.1" 200 -]
[2025-07-26 00:01:23,856: INFO: _internal: 127.0.0.1 - - [26/Jul/2025 00:01:23] "[36mGET /static/assets/img/form-v9.jpg HTTP/1.1[0m" 304 -]
[2025-07-26 00:02:00,365: INFO: app: Received prediction request with data: [{'City': 'Chandigarh', 'Date': '2025-07-16', 'PM2.5': 1000.0, 'PM10': 1000.0, 'NO': 666.0, 'NO2': 55.0, 'NOx': 666.0, 'NH3': 666.0, 'CO': 666.0, 'SO2': 66.0, 'O3': 666.0, 'Benzene': 66.0, 'Toluene': 66.0, 'Xylene': 66.0}]]
[2025-07-26 00:02:00,393: INFO: common: yaml file: config\config.yaml loaded successfully]
[2025-07-26 00:02:00,410: INFO: common: yaml file: params.yaml loaded successfully]
[2025-07-26 00:02:00,428: INFO: common: yaml file: schema.yaml loaded successfully]
[2025-07-26 00:02:00,440: INFO: configuration: Debug: Schema loaded into Configuration Manager:{'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-26 00:02:00,445: INFO: common: created directory at artifacts]
[2025-07-26 00:02:00,448: INFO: common: created directory at artifacts/data_transformation]
[2025-07-26 00:02:00,559: INFO: prediction: PredictionPipeline initialized: preprocessor and model loaded.]
[2025-07-26 00:02:00,567: DEBUG: prediction: PredictionPipeline: CT expects numerical columns to log: ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene']]
[2025-07-26 00:02:00,568: DEBUG: prediction: PredictionPipeline: CT expects numerical columns NOT to log: ['Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend']]
[2025-07-26 00:02:00,571: DEBUG: prediction: PredictionPipeline: CT expects categorical columns: ['City']]
[2025-07-26 00:02:00,571: DEBUG: prediction: PredictionPipeline: All expected CT columns in order: ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend', 'City']]
[2025-07-26 00:02:00,574: INFO: prediction: Received raw input data for prediction. Shape: (1, 14)]
[2025-07-26 00:02:00,601: DEBUG: prediction: PredictionPipeline: raw_input_data dtypes (from Flask form):
City        object
Date        object
PM2.5      float64
PM10       float64
NO         float64
NO2        float64
NOx        float64
NH3        float64
CO         float64
SO2        float64
O3         float64
Benzene    float64
Toluene    float64
Xylene     float64
dtype: object]
[2025-07-26 00:02:00,708: DEBUG: prediction: PredictionPipeline: raw_input_data head (from Flask form):
         City        Date  ...  Toluene  Xylene
0  Chandigarh  2025-07-16  ...     66.0    66.0

[1 rows x 14 columns]]
[2025-07-26 00:02:00,755: DEBUG: prediction: Date features engineered for prediction input.]
[2025-07-26 00:02:00,761: DEBUG: prediction: Dropped column 'Xylene' from prediction input.]
[2025-07-26 00:02:00,761: DEBUG: prediction: Dropped column 'Date' from prediction input.]
[2025-07-26 00:02:00,761: DEBUG: prediction: PredictionPipeline: data_to_transform columns BEFORE reindex: ['City', 'PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend']]
[2025-07-26 00:02:00,774: DEBUG: prediction: PredictionPipeline: data_to_transform dtypes BEFORE reindex:
City          object
PM2.5        float64
PM10         float64
NO           float64
NO2          float64
NOx          float64
NH3          float64
CO           float64
SO2          float64
O3           float64
Benzene      float64
Toluene      float64
Year           int32
Month          int32
Day            int32
DayOfWeek      int32
IsWeekend      int32
dtype: object]
[2025-07-26 00:02:00,778: DEBUG: prediction: PredictionPipeline: data_for_ct columns AFTER reindex: ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend', 'City']]
[2025-07-26 00:02:00,782: DEBUG: prediction: PredictionPipeline: data_for_ct dtypes AFTER reindex:
PM2.5        float64
PM10         float64
NO           float64
NO2          float64
NOx          float64
NH3          float64
CO           float64
SO2          float64
O3           float64
Benzene      float64
Toluene      float64
Year           int32
Month          int32
Day            int32
DayOfWeek      int32
IsWeekend      int32
City          object
dtype: object]
[2025-07-26 00:02:00,845: DEBUG: prediction: PredictionPipeline: data_for_ct head AFTER reindex:
    PM2.5    PM10  ...  IsWeekend        City
0  1000.0  1000.0  ...          0  Chandigarh

[1 rows x 17 columns]]
[2025-07-26 00:02:00,908: INFO: prediction: Prediction input data transformed using loaded preprocessor.]
[2025-07-26 00:02:00,908: DEBUG: prediction: PredictionPipeline: Transformed data shape: (1, 42)]
[2025-07-26 00:02:00,908: DEBUG: prediction: PredictionPipeline: Transformed data sample (first 5 values): [3.91003971 3.79377591 4.46407711 1.16184516 3.69087818]]
[2025-07-26 00:02:00,981: INFO: prediction: Prediction made successfully.]
[2025-07-26 00:02:00,982: DEBUG: prediction: PredictionPipeline: Raw model prediction (before inverse transform): 5.855386884045373]
[2025-07-26 00:02:00,982: INFO: prediction: Inverse log1p transformation applied to prediction.]
[2025-07-26 00:02:00,984: DEBUG: prediction: PredictionPipeline: Final prediction (after inverse transform): 348.1099389955736]
[2025-07-26 00:02:00,984: INFO: app: Prediction successful. Predicted AQI: 348.11 (Bucket: Very Poor)]
[2025-07-26 00:02:00,986: INFO: _internal: 127.0.0.1 - - [26/Jul/2025 00:02:00] "POST /predict HTTP/1.1" 200 -]
[2025-07-26 00:02:01,053: INFO: _internal: 127.0.0.1 - - [26/Jul/2025 00:02:01] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -]
[2025-07-26 00:09:32,311: INFO: app: Home page requested.]
[2025-07-26 00:09:32,328: INFO: _internal: 127.0.0.1 - - [26/Jul/2025 00:09:32] "GET / HTTP/1.1" 200 -]
[2025-07-26 00:09:32,427: INFO: _internal: 127.0.0.1 - - [26/Jul/2025 00:09:32] "[33mGET /static/js/scripts.js HTTP/1.1[0m" 404 -]
[2025-07-26 00:09:32,444: INFO: _internal: 127.0.0.1 - - [26/Jul/2025 00:09:32] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -]
[2025-07-26 00:09:32,478: INFO: _internal: 127.0.0.1 - - [26/Jul/2025 00:09:32] "[36mGET /static/assets/img/form-v9.jpg HTTP/1.1[0m" 304 -]
[2025-07-26 00:09:32,479: INFO: _internal: 127.0.0.1 - - [26/Jul/2025 00:09:32] "[36mGET /static/assets/img/air_pollution.jpg HTTP/1.1[0m" 304 -]
[2025-07-26 01:28:00,540: INFO: app: Home page requested.]
[2025-07-26 01:28:00,573: INFO: _internal: 127.0.0.1 - - [26/Jul/2025 01:28:00] "GET / HTTP/1.1" 200 -]
[2025-07-26 01:28:00,918: INFO: _internal: 127.0.0.1 - - [26/Jul/2025 01:28:00] "[33mGET /static/js/scripts.js HTTP/1.1[0m" 404 -]
[2025-07-26 01:28:00,928: INFO: _internal: 127.0.0.1 - - [26/Jul/2025 01:28:00] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -]
[2025-07-26 01:28:01,009: INFO: _internal: 127.0.0.1 - - [26/Jul/2025 01:28:01] "[36mGET /static/assets/img/form-v9.jpg HTTP/1.1[0m" 304 -]
[2025-07-26 01:28:01,122: INFO: _internal: 127.0.0.1 - - [26/Jul/2025 01:28:01] "[36mGET /static/assets/img/air_pollution.jpg HTTP/1.1[0m" 304 -]
[2025-07-26 01:29:27,036: INFO: app: Received prediction request with data: [{'City': 'Chennai', 'Date': '2025-07-16', 'PM2.5': 444.0, 'PM10': 444.0, 'NO': 44.0, 'NO2': 444.0, 'NOx': 444.0, 'NH3': 444.0, 'CO': 444.0, 'SO2': 444.0, 'O3': 444.0, 'Benzene': 444.0, 'Toluene': 444.0, 'Xylene': 444.0}]]
[2025-07-26 01:29:27,330: INFO: common: yaml file: config\config.yaml loaded successfully]
[2025-07-26 01:29:27,422: INFO: common: yaml file: params.yaml loaded successfully]
[2025-07-26 01:29:27,506: INFO: common: yaml file: schema.yaml loaded successfully]
[2025-07-26 01:29:27,506: INFO: configuration: Debug: Schema loaded into Configuration Manager:{'City': 'object', 'Date': 'object', 'PM2.5': 'float64', 'PM10': 'float64', 'NO': 'float64', 'NO2': 'float64', 'NOx': 'float64', 'NH3': 'float64', 'CO': 'float64', 'SO2': 'float64', 'O3': 'float64', 'Benzene': 'float64', 'Toluene': 'float64', 'Xylene': 'float64', 'AQI': 'float64', 'AQI_Bucket': 'object'}]
[2025-07-26 01:29:27,517: INFO: common: created directory at artifacts]
[2025-07-26 01:29:27,521: INFO: common: created directory at artifacts/data_transformation]
[2025-07-26 01:29:27,707: INFO: prediction: PredictionPipeline initialized: preprocessor and model loaded.]
[2025-07-26 01:29:27,707: DEBUG: prediction: PredictionPipeline: CT expects numerical columns to log: ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene']]
[2025-07-26 01:29:27,707: DEBUG: prediction: PredictionPipeline: CT expects numerical columns NOT to log: ['Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend']]
[2025-07-26 01:29:27,707: DEBUG: prediction: PredictionPipeline: CT expects categorical columns: ['City']]
[2025-07-26 01:29:27,707: DEBUG: prediction: PredictionPipeline: All expected CT columns in order: ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend', 'City']]
[2025-07-26 01:29:27,707: INFO: prediction: Received raw input data for prediction. Shape: (1, 14)]
[2025-07-26 01:29:27,731: DEBUG: prediction: PredictionPipeline: raw_input_data dtypes (from Flask form):
City        object
Date        object
PM2.5      float64
PM10       float64
NO         float64
NO2        float64
NOx        float64
NH3        float64
CO         float64
SO2        float64
O3         float64
Benzene    float64
Toluene    float64
Xylene     float64
dtype: object]
[2025-07-26 01:29:27,827: DEBUG: prediction: PredictionPipeline: raw_input_data head (from Flask form):
      City        Date  PM2.5  ...  Benzene  Toluene  Xylene
0  Chennai  2025-07-16  444.0  ...    444.0    444.0   444.0

[1 rows x 14 columns]]
[2025-07-26 01:29:27,875: DEBUG: prediction: Date features engineered for prediction input.]
[2025-07-26 01:29:27,878: DEBUG: prediction: Dropped column 'Xylene' from prediction input.]
[2025-07-26 01:29:27,883: DEBUG: prediction: Dropped column 'Date' from prediction input.]
[2025-07-26 01:29:27,885: DEBUG: prediction: PredictionPipeline: data_to_transform columns BEFORE reindex: ['City', 'PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend']]
[2025-07-26 01:29:27,889: DEBUG: prediction: PredictionPipeline: data_to_transform dtypes BEFORE reindex:
City          object
PM2.5        float64
PM10         float64
NO           float64
NO2          float64
NOx          float64
NH3          float64
CO           float64
SO2          float64
O3           float64
Benzene      float64
Toluene      float64
Year           int32
Month          int32
Day            int32
DayOfWeek      int32
IsWeekend      int32
dtype: object]
[2025-07-26 01:29:27,889: DEBUG: prediction: PredictionPipeline: data_for_ct columns AFTER reindex: ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2', 'O3', 'Benzene', 'Toluene', 'Year', 'Month', 'Day', 'DayOfWeek', 'IsWeekend', 'City']]
[2025-07-26 01:29:27,889: DEBUG: prediction: PredictionPipeline: data_for_ct dtypes AFTER reindex:
PM2.5        float64
PM10         float64
NO           float64
NO2          float64
NOx          float64
NH3          float64
CO           float64
SO2          float64
O3           float64
Benzene      float64
Toluene      float64
Year           int32
Month          int32
Day            int32
DayOfWeek      int32
IsWeekend      int32
City          object
dtype: object]
[2025-07-26 01:29:27,943: DEBUG: prediction: PredictionPipeline: data_for_ct head AFTER reindex:
   PM2.5   PM10    NO  ...  DayOfWeek  IsWeekend     City
0  444.0  444.0  44.0  ...          2          0  Chennai

[1 rows x 17 columns]]
[2025-07-26 01:29:27,993: INFO: prediction: Prediction input data transformed using loaded preprocessor.]
[2025-07-26 01:29:27,993: DEBUG: prediction: PredictionPipeline: Transformed data shape: (1, 42)]
[2025-07-26 01:29:27,993: DEBUG: prediction: PredictionPipeline: Transformed data sample (first 5 values): [2.84923976 2.49104003 1.47498025 3.79433225 3.24794467]]
[2025-07-26 01:29:28,054: INFO: prediction: Prediction made successfully.]
[2025-07-26 01:29:28,056: DEBUG: prediction: PredictionPipeline: Raw model prediction (before inverse transform): 5.756725920316263]
[2025-07-26 01:29:28,056: INFO: prediction: Inverse log1p transformation applied to prediction.]
[2025-07-26 01:29:28,056: DEBUG: prediction: PredictionPipeline: Final prediction (after inverse transform): 315.31100426989195]
[2025-07-26 01:29:28,059: INFO: app: Prediction successful. Predicted AQI: 315.31 (Bucket: Very Poor)]
[2025-07-26 01:29:28,070: INFO: _internal: 127.0.0.1 - - [26/Jul/2025 01:29:28] "POST /predict HTTP/1.1" 200 -]
[2025-07-26 01:29:28,157: INFO: _internal: 127.0.0.1 - - [26/Jul/2025 01:29:28] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -]
